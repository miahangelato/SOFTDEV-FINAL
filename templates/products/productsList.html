{% extends 'base.html' %} 
{% load static %}

<head>
    <link href="{% static 'css/productList.css' %}" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>{% block title %}Home{% endblock title %}</title>
</head>

{% block content %}

{% for msg in messages %}
<div class="alert alert-warning alert-dismissible fade show mx-auto my-3" role="alert" style="width: 50%;">
    <strong>{{ msg }}</strong>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
  {% endfor %}

<div class="container-fluid">
    <div class="row flex-nowrap flex-column flex-md-row mb-2 mt-2 mx-2 mb-md-2 mt-md-2" style="min-height: 100vh;">
        <div class="col-md-2 col-12 px-sm-2 px-0 bg-dark " style="border-radius: 0.3rem; min-height: 100px;">
      
            <div class="d-flex flex-column align-items-center align-items-sm-start px-2 pt-1 pb-3 text-white" style="flex-grow: 1;">
                <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start" id="menu">
                    {% for category in category_list %}
                    <li class="nav-item">
                        <a href="{% url 'index' %}?category={{ category.id|urlencode }}" class="nav-link align-middle px-0 {% if selected_category == category %}active-custom{% endif %}">
                            <span class="ms-1 text-white">{{ category }}</span>
                        </a>
                    </li>
                    {% endfor %}
                </ul>
                <hr class="text-white">
                <form method="GET" action="{% url 'index' %}">
                    <div class="text-white">
                        <div class="mb-3">
                            <label for="min_price" class="form-label">Min Price</label>
                            <input type="number" name="min_price" class="form-control" placeholder="Min price" value="{{ price_min|default:' ' }}">
                        </div>
                        <div class="mb-3">
                            <label for="max_price" class="form-label">Max Price</label>
                            <input type="number" name="max_price" class="form-control" placeholder="Max price" value="{{ price_max|default:' ' }}">
                        </div>
                        <button class="btn btn-outline-light mb-3 w-100" type="submit">Filter by Price</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="col-md-10 col-12 py-3" style="flex-grow: 1;">
            <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4">
                {% for product in products %}
                <div class="col mb-2">
                    <div class="card shadow-sm rounded-lg border-dark">
                        <img class="card-img-top" src="{{ product.image.url }}" alt="{{ product.name }}" style="height: 200px; object-fit: cover;" />
                        <div class="card-body">
                            <h5 class="card-title">{{ product.name }}</h5>
                            <h6 class="text-black-50 mt-0">Seller: {{ product.seller.username }}</h6>
                            <p class="card-text">Price: ${{ product.price }}</p>
                            <a class="btn btn-primary bg-dark border-dark" href="{% url 'viewProduct' product.id %}">View Product</a>
                        </div>
                    </div>
                </div>
                {% empty %}
                <p class="no-prods-found">No products found.</p>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
